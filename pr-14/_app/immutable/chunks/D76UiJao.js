var C=Object.defineProperty;var k=a=>{throw TypeError(a)};var D=(a,e,s)=>e in a?C(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s;var g=(a,e,s)=>D(a,typeof e!="symbol"?e+"":e,s),y=(a,e,s)=>e.has(a)||k("Cannot "+s);var t=(a,e,s)=>(y(a,e,"read from private field"),s?s.call(a):e.get(a)),l=(a,e,s)=>e.has(a)?k("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,s),M=(a,e,s,i)=>(y(a,e,"write to private field"),i?i.call(a,s):e.set(a,s),s);import{al as B,am as F,an as w,ao as I,ap as S,aq as x,o as q,y as E,ar as L,as as N}from"./BDB46AmI.js";var h,n,r,p,m,_,v;class U{constructor(e,s=!0){g(this,"anchor");l(this,h,new Map);l(this,n,new Map);l(this,r,new Map);l(this,p,new Set);l(this,m,!0);l(this,_,()=>{var e=B;if(t(this,h).has(e)){var s=t(this,h).get(e),i=t(this,n).get(s);if(i)F(i),t(this,p).delete(s);else{var c=t(this,r).get(s);c&&(t(this,n).set(s,c.effect),t(this,r).delete(s),c.fragment.lastChild.remove(),this.anchor.before(c.fragment),i=c.effect)}for(const[f,o]of t(this,h)){if(t(this,h).delete(f),f===e)break;const d=t(this,r).get(o);d&&(w(d.effect),t(this,r).delete(o))}for(const[f,o]of t(this,n)){if(f===s||t(this,p).has(f))continue;const d=()=>{if(Array.from(t(this,h).values()).includes(f)){var b=document.createDocumentFragment();L(o,b),b.append(S()),t(this,r).set(f,{effect:o,fragment:b})}else w(o);t(this,p).delete(f),t(this,n).delete(f)};t(this,m)||!i?(t(this,p).add(f),I(o,d,!1)):d()}}});l(this,v,e=>{t(this,h).delete(e);const s=Array.from(t(this,h).values());for(const[i,c]of t(this,r))s.includes(i)||(w(c.effect),t(this,r).delete(i))});this.anchor=e,M(this,m,s)}ensure(e,s){var i=B,c=N();if(s&&!t(this,n).has(e)&&!t(this,r).has(e))if(c){var f=document.createDocumentFragment(),o=S();f.append(o),t(this,r).set(e,{effect:x(()=>s(o)),fragment:f})}else t(this,n).set(e,x(()=>s(this.anchor)));if(t(this,h).set(i,e),c){for(const[d,u]of t(this,n))d===e?i.skipped_effects.delete(u):i.skipped_effects.add(u);for(const[d,u]of t(this,r))d===e?i.skipped_effects.delete(u.effect):i.skipped_effects.add(u.effect);i.oncommit(t(this,_)),i.ondiscard(t(this,v))}else q&&(this.anchor=E),t(this,_).call(this)}}h=new WeakMap,n=new WeakMap,r=new WeakMap,p=new WeakMap,m=new WeakMap,_=new WeakMap,v=new WeakMap;const O="5";var A;typeof window<"u"&&((A=window.__svelte??(window.__svelte={})).v??(A.v=new Set)).add(O);export{U as B};
